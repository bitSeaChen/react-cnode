(this["webpackJsonpreact-cnode"]=this["webpackJsonpreact-cnode"]||[]).push([[0],{121:function(e,t,a){},122:function(e,t,a){e.exports=a.p+"static/media/cnodejs.86f6a7c2.svg"},138:function(e,t,a){},142:function(e,t,a){e.exports=a(225)},147:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),c=a.n(r),i=(a(147),a(22)),s=a(23),o=a(26),m=a(24),u=a(41),p=a(27),_=a(122),h=a.n(_),d=a(71),E=a.n(d),f=a(229),b=a(12),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).info=a.info.bind(Object(u.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"info",value:function(e){e.preventDefault(),f.a.info({title:"\u5173\u4e8e",content:l.a.createElement("ul",null,l.a.createElement("li",null,"author\uff1a\u9648\u8d24\u76f8"),l.a.createElement("li",null,"GitHub\uff1a",l.a.createElement("a",{href:"https://github.com/XXIANG1997"},"xxiang1997")),l.a.createElement("li",null,"\u6280\u672f\u6808\uff1aReact\u3001antd\u3001moment"))})}},{key:"render",value:function(){return l.a.createElement("header",{className:E.a.header},l.a.createElement("div",{className:E.a.logo},l.a.createElement("img",{src:h.a,alt:""})),l.a.createElement("div",{className:E.a.info},l.a.createElement(b.b,{to:"/"},"\u9996\u9875"),l.a.createElement("a",{href:"https://cnodejs.org/getstart",target:"_blank",rel:"noopener noreferrer"},"\u65b0\u624b\u5165\u95e8"),l.a.createElement("a",{href:"https://cnodejs.org/api",target:"_blank",rel:"noopener noreferrer"},"API"),l.a.createElement("a",{href:"",onClick:this.info,rel:"noopener noreferrer"},"\u5173\u4e8e")))}}]),t}(l.a.Component),g=a(95),v=a.n(g),N=a(133),j=a.n(N),O=a(230),k=function(){O.a.error("\u6570\u636e\u52a0\u8f7d\u5931\u8d25\uff01",1)},D=j.a.create({baseURL:"https://cnodejs.org/api/v1",timeout:5e3});D.interceptors.request.use((function(e){return e}),(function(e){k(),Promise.reject(e)})),D.interceptors.response.use((function(e){return e.data}),(function(e){return k(),Promise.reject(e)}));var C=D,M=a(228),T=a(231),Y=a(29),x=a.n(Y),w=a(19),A=a.n(w),R=a(232),P={good:{tag:"\u7cbe\u534e",color:"green"},job:{tag:"\u62db\u8058",color:"purple"},ask:{tag:"\u95ee\u7b54",color:"lime"},share:{tag:"\u5206\u4eab",color:"cyan"}};var S=function(e){var t=e.list;return 0===t.length?l.a.createElement(T.a,null):l.a.createElement("div",{className:x.a.topics},t&&t.map((function(e){return l.a.createElement("div",{className:x.a.item,key:e.id},l.a.createElement(b.b,{to:"/user/"+e.author.loginname},l.a.createElement("img",{className:x.a.img,src:e.author.avatar_url,alt:""})),l.a.createElement("div",{className:x.a.count},l.a.createElement("span",{className:x.a.replyCount},e.reply_count),l.a.createElement("span",null," / "),l.a.createElement("span",{className:x.a.visitCount},e.visit_count)),l.a.createElement("div",{className:x.a.tag},l.a.createElement(R.a,{color:P[e.tab]?P[e.tab].color:"blue"},P[e.tab]?P[e.tab].tag:"\u5176\u4ed6")),l.a.createElement("div",{className:x.a.title},l.a.createElement(b.b,{to:"/topic/"+e.id},e.title)),l.a.createElement("div",{className:x.a.time},A()(e.last_reply_at,"YYYY-MM-DD").startOf("day").fromNow()))})))},H=M.a.TabPane,W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={page:1,limit:20,list:[],store:{},tab:"all",loading:!1},a.tabsChange=a.tabsChange.bind(Object(u.a)(a)),a.scrollMethod=a.scrollMethod.bind(Object(u.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getTopics",value:function(){var e,t=this,a=this.state;(e={page:a.page,limit:a.limit,tab:a.tab},C({url:"/topics",method:"get",params:e})).then((function(e){var n=a.store;t.setState({list:e.data,limit:t.state.limit+10,loading:!1}),n[a.tab]={limit:a.limit,data:e.data}}))}},{key:"tabsChange",value:function(e){var t=this,a=this.state.store;a[e]?this.setState({tab:e,limit:a[e].limit,list:a[e].data}):this.setState({tab:e,limit:20,list:[]},(function(){t.getTopics()}))}},{key:"scrollMethod",value:function(){var e=this,t=document.body.scrollHeight||document.documentElement.scrollHeight;document.documentElement.clientHeight+(document.body.scrollTop||document.documentElement.scrollTop)>=t&&this.setState({loading:!0},(function(){e.getTopics()}))}},{key:"componentDidMount",value:function(){this.getTopics(),window.addEventListener("scroll",this.scrollMethod)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollMethod)}},{key:"render",value:function(){return l.a.createElement("div",{className:v.a.home},l.a.createElement(M.a,{className:v.a.tabs,onChange:this.tabsChange},l.a.createElement(H,{tab:"\u5168\u90e8",key:"all"},l.a.createElement(S,{list:this.state.list}),this.state.loading?l.a.createElement(T.a,null):""),l.a.createElement(H,{tab:"\u7cbe\u534e",key:"good"},l.a.createElement(S,{list:this.state.list}),this.state.loading?l.a.createElement(T.a,null):""),l.a.createElement(H,{tab:"\u5206\u4eab",key:"share"},l.a.createElement(S,{list:this.state.list}),this.state.loading?l.a.createElement(T.a,null):""),l.a.createElement(H,{tab:"\u95ee\u7b54",key:"ask"},l.a.createElement(S,{list:this.state.list}),this.state.loading?l.a.createElement(T.a,null):""),l.a.createElement(H,{tab:"\u5de5\u4f5c",key:"job"},l.a.createElement(S,{list:this.state.list}),this.state.loading?l.a.createElement(T.a,null):"")))}}]),t}(l.a.Component),L=a(140),U=a(30),X=a.n(U),z=(a(121),a(227)),G=a(31),I=a.n(G);var V=function(e){return l.a.createElement("div",{className:I.a.reply},l.a.createElement("div",{className:I.a.replyCount},e.replies&&e.replies.length," \u56de\u590d"),e.replies&&e.replies.map((function(e,t){return l.a.createElement("div",{key:e.id,className:I.a.item},l.a.createElement("div",{className:I.a.left},l.a.createElement(b.b,{to:"/user/"+e.author.loginname},l.a.createElement("img",{src:e.author.avatar_url,alt:""}))),l.a.createElement("div",{className:I.a.right},l.a.createElement("div",{className:I.a.info},l.a.createElement("span",null,t+1," \u697c \ud83c\udf3b"),l.a.createElement("span",{className:I.a.author},l.a.createElement(b.b,{to:"/user/"+e.author.loginname},e.author.loginname),"\ud83c\udf3b "),l.a.createElement("span",null,A()(e.create_at,"YYYY-MM-DD").startOf("day").fromNow())),l.a.createElement("div",{className:I.a.content,dangerouslySetInnerHTML:{__html:e.content}})))})))},Z=a(58),q=a.n(Z),J=a(25),B=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={userData:{}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"fetchData",value:function(e){var t=this;(function(e){return C({url:"/user/".concat(e),method:"get"})})(e).then((function(e){t.setState({userData:e.data}),t.props.addRecentData({recent_topics:e.data.recent_topics,recent_replies:e.data.recent_replies})}))}},{key:"componentWillReceiveProps",value:function(e,t){this.fetchData(e.loginname)}},{key:"componentDidMount",value:function(){this.props.loginname&&this.fetchData(this.props.loginname)}},{key:"render",value:function(){var e=this.state.userData;return l.a.createElement("div",{className:q.a.profilePanel},l.a.createElement("ul",null,l.a.createElement("li",{className:q.a.info},l.a.createElement(b.b,{to:"/user/"+e.loginname},l.a.createElement("img",{src:e.avatar_url,alt:""}),l.a.createElement("span",null,e.loginname))),l.a.createElement("li",{className:q.a.integral},l.a.createElement("span",null,"\u79ef\u5206\uff1a",e.score)),l.a.createElement("li",{className:q.a.github},"Github\uff1a",l.a.createElement("a",{target:"_blank",rel:"nofollow noopener noreferrer",href:"https://github.com/".concat(e.githubUsername)},e.githubUsername)),l.a.createElement("li",null,l.a.createElement("span",null,"\u6ce8\u518c\u65f6\u95f4\uff1a",A()(e.create_at,"YYYY-MM-DD").startOf("day").fromNow()))))}}]),t}(l.a.Component),K=Object(J.b)(null,(function(e){return{addRecentData:function(t){e({type:"ADD_RECENT_DATA",data:t})}}}))(B),Q=a(59),F=a.n(Q);var $=Object(J.b)((function(e,t){return{recentReply:e.recent_replies}}),null)((function(e){var t=e.recentReply;return l.a.createElement("div",{className:F.a.recentReply},l.a.createElement("span",{className:F.a.title},"\u6700\u8fd1\u53c2\u4e0e\u7684\u4e3b\u9898"),l.a.createElement(z.a,null),l.a.createElement("ul",{className:F.a.topic},t&&t.map((function(e){return l.a.createElement("li",{key:e.id,className:F.a.item},l.a.createElement(b.b,{to:"/topic/"+e.id},e.title))}))))})),ee=a(60),te=a.n(ee);var ae=Object(J.b)((function(e,t){return{recentTopics:e.recent_topics}}),null)((function(e){var t=e.recentTopics;return l.a.createElement("div",{className:te.a.otherTopic},l.a.createElement("span",{className:te.a.title},"\u6700\u8fd1\u521b\u5efa\u7684\u4e3b\u9898"),l.a.createElement(z.a,null),l.a.createElement("ul",{className:te.a.topic},t&&t.map((function(e){return l.a.createElement("li",{key:e.id,className:te.a.item},l.a.createElement(b.b,{to:"/topic/"+e.id},e.title))}))))})),ne=a(69),le={recent_topics:[],recent_replies:[]};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;return"ADD_RECENT_DATA"===t.type?{recent_topics:t.data.recent_topics,recent_replies:t.data.recent_replies}:e},ce=Object(ne.b)(re),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={data:{}},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchData(this.props.match.params.id)}},{key:"componentWillReceiveProps",value:function(e,t){this.fetchData(e.match.params.id)}},{key:"fetchData",value:function(e){var t=this;(function(e){return C({url:"/topic/".concat(e),method:"get"})})(e).then((function(e){t.setState({data:Object(L.a)({},e.data,{},e.data.author)})}))}},{key:"render",value:function(){var e=this.state.data;return l.a.createElement("div",{className:X.a.topic},l.a.createElement("div",{className:X.a.main},l.a.createElement("header",{className:X.a.header},l.a.createElement("div",{className:X.a.title},e.title),l.a.createElement("div",{className:X.a.info},l.a.createElement("span",null,"\u53d1\u5e03\u4e8e ",A()(e.last_reply_at,"YYYY-MM-DD").startOf("day").fromNow()," \ud83c\udf1e \xa0"),l.a.createElement("span",{className:X.a.author},"\u4f5c\u8005\xa0",l.a.createElement(b.b,{to:"/user/"+e.loginname},e.loginname," \ud83c\udf1e \xa0")),l.a.createElement("span",null,e.visit_count," \u6b21\u6d4f\u89c8 \ud83c\udf1e \xa0"),l.a.createElement("span",null,"\u6765\u81ea ",P[e.tab]?P[e.tab].tag:"\u5176\u4ed6"))),l.a.createElement(z.a,null),l.a.createElement("section",{className:X.a.content,dangerouslySetInnerHTML:{__html:e.content}}),l.a.createElement(V,{replies:e.replies})),l.a.createElement("div",{className:X.a.sidebar},l.a.createElement(J.a,{store:ce},l.a.createElement(K,{loginname:e.loginname}),l.a.createElement(ae,null),l.a.createElement($,null))))}}]),t}(l.a.Component),se=a(97),oe=a.n(se),me=(a(223),a(224),a(36)),ue=a(138),pe=a.n(ue),_e=function(e){function t(e){return Object(i.a)(this,t),Object(o.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return l.a.createElement("div",{className:pe.a.profile},l.a.createElement(J.a,{store:ce},l.a.createElement(K,{loginname:e}),l.a.createElement(ae,{simple:!1}),l.a.createElement($,{simple:!1})))}}]),t}(l.a.Component);A.a.locale("zh-cn");var he=function(){return l.a.createElement("div",{className:oe.a.app},l.a.createElement(b.a,null,l.a.createElement(y,null),l.a.createElement("div",{className:oe.a.main},l.a.createElement(me.b,{exact:!0,path:"/",component:W}),l.a.createElement(me.b,{path:"/topic/:id",component:ie}),l.a.createElement(me.b,{path:"/user/:id",component:_e}),l.a.createElement(me.b,{exact:!0,path:"/topic",render:function(){return l.a.createElement(me.a,{to:"/"})}}),l.a.createElement(me.b,{exact:!0,path:"/user",render:function(){return l.a.createElement(me.a,{to:"/"})}}))))};c.a.render(l.a.createElement(he,null),document.getElementById("root"))},29:function(e,t,a){e.exports={topics:"style_topics__2xba2",item:"style_item__1gMBD",img:"style_img__31KHg",count:"style_count__2zNbN",replyCount:"style_replyCount__2VuHm",visitCount:"style_visitCount__1ouZD",tag:"style_tag__1UN0t",title:"style_title__1gG2r",time:"style_time__1kT-Q"}},30:function(e,t,a){e.exports={topic:"style_topic__2mz6U",main:"style_main__9iTtA",header:"style_header__1V9lL",title:"style_title__pkhMT",info:"style_info__20lyp",author:"style_author__YpEZZ",content:"style_content__2A58f",sidebar:"style_sidebar__3_WeL"}},31:function(e,t,a){e.exports={reply:"style_reply__107fb",replyCount:"style_replyCount__3PwAq",item:"style_item__1b5SW",left:"style_left__3zmZr",right:"style_right__1bNeO",info:"style_info__WpCrs",author:"style_author__2yXuc",content:"style_content__1agC5"}},58:function(e,t,a){e.exports={profilePanel:"style_profilePanel__33SXx",info:"style_info__M3HGU",integral:"style_integral__3aqh0",github:"style_github__1yWs2"}},59:function(e,t,a){e.exports={recentReply:"style_recentReply__gs0nM",title:"style_title__1tXwf",topic:"style_topic__3lYgh",item:"style_item__1wh3Y"}},60:function(e,t,a){e.exports={otherTopic:"style_otherTopic__1KnJn",title:"style_title__3SVH3",topic:"style_topic__3EqiC",item:"style_item__3zfWr"}},71:function(e,t,a){e.exports={header:"style_header__25sDv",logo:"style_logo__1QaVJ",info:"style_info__5jfEz"}},95:function(e,t,a){e.exports={home:"style_home__3pAn4",tabs:"style_tabs__l-8PZ"}},97:function(e,t,a){e.exports={app:"App_app__1XauV",main:"App_main__3hXi3"}}},[[142,1,2]]]);
//# sourceMappingURL=main.8a4cd157.chunk.js.map